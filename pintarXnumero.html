<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color by Number Game - 7 Colors</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        #game-container {
            max-width: 900px;
            width: 100%;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        h1 { color: #333; margin-bottom: 5px; }
        p { color: #555; margin-top: 0; margin-bottom: 20px; }

        #svgContainer {
            width: 100%;
            height: 60vh;
            border: 2px solid #333;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background-color: #fdfdfd;
        }

        #svgContainer svg {
            max-width: 100%;
            max-height: 100%;
            display: block;
        }

        #palette {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .color-btn {
            width: 50px;
            height: 50px;
            line-height: 50px;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            cursor: pointer;
            border: 3px solid #333;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .color-btn:hover {
            transform: scale(1.1);
        }

        #message {
            font-size: 1.4em;
            color: #d32f2f;
            min-height: 1.5em;
            font-weight: bold;
        }
        #message.win-message { color: #4CAF50; }

        #restartBtn {
            padding: 12px 25px;
            font-size: 1.1em;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            margin-top: 15px;
            transition: background-color 0.2s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
        }

        #restartBtn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<div id="game-container">
    <h1>ðŸŽ¨ Color By Numbers</h1>
    <p>Selecciona un nÃºmero de color y haz clic en la parte correspondiente del dibujo de la caja de regalo.</p>

    <div id="svgContainer">

	<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 560 288" enable-background="new 0 0 560 288" xml:space="preserve">
<rect data-num="1" x="75.86" y="60.71" fill="#FFFFFF" stroke="#000000" stroke-width="2" stroke-miterlimit="10" width="107.14" height="72.86"/>
<rect data-num="4" x="183" y="133.57" fill="#FFFFFF" stroke="#000000" stroke-width="2" stroke-miterlimit="10" width="107.14" height="72.86"/>
<rect data-num="3" x="75.86" y="133.57" fill="#FFFFFF" stroke="#000000" stroke-width="2" stroke-miterlimit="10" width="107.14" height="72.86"/>
<rect data-num="2" x="183" y="60.71" fill="#FFFFFF" stroke="#000000" stroke-width="2" stroke-miterlimit="10" width="107.14" height="72.86"/>
<text transform="matrix(1 0 0 1 124.1888 100.8406)" font-family="'MyriadPro-Regular'" font-size="12px">1</text>
<text transform="matrix(1 0 0 1 240.6001 100.8403)" font-family="'MyriadPro-Regular'" font-size="12px">2</text>
<text transform="matrix(1 0 0 1 129.2061 170.2734)" font-family="'MyriadPro-Regular'" font-size="12px">3</text>
<text transform="matrix(1 0 0 1 236.5714 175.3631)" font-family="'MyriadPro-Regular'" font-size="12px">4</text>
</svg>
			
    </div>

    <div id="palette"></div>

    <div id="message"></div>
    <button id="restartBtn" style="display:none;" onclick="restart()">Play Again</button>
</div>

<script>
    const colors = [
        "#f94144", // 1: Rojo
        "#0000ff", // 2: Azul
        "#00ff00", // 3: Verde
        "#ff8c00", // 4: Naranja
        "#c77dff", // 5: PÃºrpura
        "#00bcd4", // 6: Cian
        "#ffd600"  // 7: Amarillo
    ];
    const NUM_COLORS = colors.length;

    const palette = document.getElementById("palette");
    const message = document.getElementById("message");
    const restartBtn = document.getElementById("restartBtn");

    let selectedColor = null;
    let totalAreas = 0;
    let coloredAreas = 0;

    // Crear paleta (7 colores)
    colors.forEach((color, i) => {
        const btn = document.createElement("div");
        btn.classList.add("color-btn");
        btn.textContent = i + 1;
        btn.style.background = color;
        btn.onclick = () => {
            selectedColor = { num: i + 1, color };
            document.querySelectorAll(".color-btn").forEach(b => {
                b.style.outline = "none";
                b.style.boxShadow = "none";
            });
            btn.style.outline = "4px solid black"; 
            btn.style.boxShadow = `0 0 10px ${selectedColor.color}`;
            message.textContent = ""; 
        };
        palette.appendChild(btn);
    });

    window.onload = () => {
        const svg = document.querySelector("#svgContainer svg");
        if (!svg) {
            message.textContent = "Error: SVG no encontrado. Pega tu dibujo en el contenedor.";
            message.style.color = "red";
            return;
        }

        const allElements = svg.querySelectorAll("path, polygon, rect, circle");
        totalAreas = allElements.length;

        allElements.forEach((p, index) => {
            // **PASO CLAVE:** Forzar estilos y asegurar la interacciÃ³n
            p.setAttribute("fill", "white");
            p.setAttribute("stroke", "black"); // FUERZA EL BORDE NEGRO
            p.setAttribute("stroke-width", "1.5");
            p.style.cursor = "pointer";
            p.style.transition = "fill 0.3s ease";
            
            // INTENTA LEER EL NÃšMERO ASIGNADO EN EL SVG (data-num)
            const requiredNum = parseInt(p.getAttribute("data-num"));

            p.addEventListener("click", () => {
                // Si el SVG no tiene data-num, o si tiene un nÃºmero fuera del rango (1-7), ignorar.
                if (isNaN(requiredNum) || requiredNum < 1 || requiredNum > NUM_COLORS) {
                    message.textContent = "âš ï¸ Esta Ã¡rea no tiene un nÃºmero asignado vÃ¡lido (1-7) en el cÃ³digo SVG.";
                    message.classList.remove("win-message");
                    setTimeout(() => message.textContent = "", 3000);
                    return;
                }
                
                const currentFill = p.getAttribute("fill");

                if (selectedColor && selectedColor.num === requiredNum) {
                    // PINTAR solo si estÃ¡ en blanco
                    if (currentFill === "white" || currentFill === "#ffffff") { 
                        p.setAttribute("fill", selectedColor.color);
                        coloredAreas++;
                        if (coloredAreas === totalAreas) showWin();
                        message.textContent = ""; 
                    }
                } else if (selectedColor) { 
                    // Color incorrecto
                    message.textContent = `âŒ Â¡Incorrecto! Esta Ã¡rea es el color #${requiredNum}.`;
                    message.classList.remove("win-message");
                    setTimeout(() => message.textContent = "", 2000);
                } else { 
                    // No hay color seleccionado
                    message.textContent = "ðŸ‘† Por favor, selecciona un color primero.";
                    message.classList.remove("win-message");
                    setTimeout(() => message.textContent = "", 2000);
                }
            });
        });
    };

    function showWin() {
        message.textContent = "ðŸŽ‰ Â¡Felicidades! Completaste el dibujo!";
        message.classList.add("win-message");
        restartBtn.style.display = "block";
    }

    function restart() {
        document.querySelectorAll("#svgContainer path, #svgContainer rect, #svgContainer circle, #svgContainer polygon").forEach(p => {
            p.setAttribute("fill", "white");
        });
        coloredAreas = 0;
        message.textContent = "";
        message.classList.remove("win-message");
        restartBtn.style.display = "none";
        document.querySelectorAll(".color-btn").forEach(b => {
            b.style.outline = "none";
            b.style.boxShadow = "none";
        });
        selectedColor = null;
    }
</script>
</body>
</html>









