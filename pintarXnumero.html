<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color by Number Game - 7 Colors</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        #game-container {
            max-width: 900px;
            width: 100%;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        h1 { color: #333; margin-bottom: 5px; }
        p { color: #555; margin-top: 0; margin-bottom: 20px; }

        #svgContainer {
            width: 100%;
            height: 60vh;
            border: 2px solid #333;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background-color: #fdfdfd;
        }

        #svgContainer svg {
            max-width: 100%;
            max-height: 100%;
            display: block;
        }

        #palette {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .color-btn {
            width: 50px;
            height: 50px;
            line-height: 50px;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            cursor: pointer;
            border: 3px solid #333;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .color-btn:hover {
            transform: scale(1.1);
        }

        #message {
            font-size: 1.4em;
            color: #d32f2f;
            min-height: 1.5em;
            font-weight: bold;
        }
        #message.win-message { color: #4CAF50; }

        #restartBtn {
            padding: 12px 25px;
            font-size: 1.1em;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            margin-top: 15px;
            transition: background-color 0.2s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
        }

        #restartBtn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<div id="game-container">
    <h1>ðŸŽ¨ Color By Numbers</h1>
    <p>Selecciona un nÃºmero de color y haz clic en la parte correspondiente del dibujo de la caja de regalo.</p>

    <div id="svgContainer">
        <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4008.39 5187.33"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#fd1500;}.cls-3{fill:#242ef0;}.cls-4{fill:#1ffd0c;}.cls-5{fill:#ff9803;}.cls-6{fill:#d226ff;}.cls-7{fill:#19a39f;}.cls-8{fill:#fefe00;}</style></defs><rect class="cls-1" width="4008.39" height="5187.33"/> 
            <path data-num="1" d="M1709.57,4210.62c-1.7,3.28-3.46,6.75-5.22,10.48-34.61,72-86.75,232.12-137.33,387.28-41.78,128.05-84.6,259.43-118.1,343-1.83,4.45-3.59,8.71-5.28,12.83h-21.45c1.76-4.12,3.52-8.38,5.28-12.83,33.57-82,77.7-217.39,120.65-349.1,49.73-152.67,101-310.13,136.29-385.38,1.24-2.75,2.54-5.44,3.78-7.93l.39-.78c1.11-2.36,2.22-4.52,3.33-6.62a7.14,7.14,0,0,1,1-1.44,5.16,5.16,0,0,1,1.18-1.24,9.91,9.91,0,0,1,11.27-1.51c.07,0,.07.07.13.07a9.85,9.85,0,0,1,4.37,4.71A9.66,9.66,0,0,1,1709.57,4210.62Z" transform="translate(-246.14 -106.67)"/>
            <path data-num="1" d="M3929.9,1936.77a80.69,80.69,0,0,1-2.66,11.66,130.52,130.52,0,0,1-12.52,28c-.32.59-.71,1.18-1,1.77-79.39,132.69-425.51,334.82-796.08,536.68-2.92,1.63-5.84,3.21-8.76,4.78a10.69,10.69,0,0,1-4.8,1.18,10,10,0,0,1-8.69-5,9.77,9.77,0,0,1,3.89-13.36c2.85-1.57,5.71-3.14,8.69-4.71,241-131.13,781.82-426.84,802.31-563.8a9.78,9.78,0,0,1,4.35-6.68c.07-.06.07-.06.13-.06a9.88,9.88,0,0,1,6.81-1.58,10.29,10.29,0,0,1,5.71,3A9.49,9.49,0,0,1,3929.9,1936.77Z" transform="translate(-246.14 -106.67)"/>
            <path data-num="2" d="M1224.33,3892.83a10.1,10.1,0,0,0-13.75-3.34c-1.58.92-3.15,1.9-4.8,2.82-73,42.83-152.29,87.24-228.9,130.27-133.68,75.06-271.78,152.54-380.47,223.21-3.11,2-6.17,4-9.22,6a31,31,0,0,1-.76,17.25,30.24,30.24,0,0,1,1.42,6.12c1.26-.92,2.57-1.83,3.95-2.75s3-2,4.61-3c109.75-72.31,252.38-152.35,390.47-229.83,73.12-41.07,148.61-83.44,218.9-124.45,5.07-3,10.06-5.89,15.06-8.84a9.79,9.79,0,0,0,4.93-8.45A9.54,9.54,0,0,0,1224.33,3892.83Z" transform="translate(-246.14 -106.67)"/>
            <path data-num="3" d="M2465,4292.75c.06-2.55.06-5.11.13-7.73a10,10,0,0,0-9.89-10H2455a8.28,8.28,0,0,0-1.83.2l-.27.07a9.79,9.79,0,0,0-7.85,9.43c-.06,4.12-.13,8.25-.2,12.31-5.69,389.18-2,569.49,4,654.38.32,4.52.65,8.84.91,12.83h19.83c-.33-4-.65-8.25-1-12.83C2462.94,4867.62,2459.21,4684.23,2465,4292.75Z" transform="translate(-246.14 -106.67)"/>
        </svg>
    </div>

    <div id="palette"></div>

    <div id="message"></div>
    <button id="restartBtn" style="display:none;" onclick="restart()">Play Again</button>
</div>

<script>
    const colors = [
        "#f94144", // 1: Rojo
        "#0000ff", // 2: Azul
        "#00ff00", // 3: Verde
        "#ff8c00", // 4: Naranja
        "#c77dff", // 5: PÃºrpura
        "#00bcd4", // 6: Cian
        "#ffd600"  // 7: Amarillo
    ];
    const NUM_COLORS = colors.length;

    const palette = document.getElementById("palette");
    const message = document.getElementById("message");
    const restartBtn = document.getElementById("restartBtn");

    let selectedColor = null;
    let totalAreas = 0;
    let coloredAreas = 0;

    // Crear paleta (7 colores)
    colors.forEach((color, i) => {
        const btn = document.createElement("div");
        btn.classList.add("color-btn");
        btn.textContent = i + 1;
        btn.style.background = color;
        btn.onclick = () => {
            selectedColor = { num: i + 1, color };
            document.querySelectorAll(".color-btn").forEach(b => {
                b.style.outline = "none";
                b.style.boxShadow = "none";
            });
            btn.style.outline = "4px solid black"; 
            btn.style.boxShadow = `0 0 10px ${selectedColor.color}`;
            message.textContent = ""; 
        };
        palette.appendChild(btn);
    });

    window.onload = () => {
        const svg = document.querySelector("#svgContainer svg");
        if (!svg) {
            message.textContent = "Error: SVG no encontrado. Pega tu dibujo en el contenedor.";
            message.style.color = "red";
            return;
        }

        const allElements = svg.querySelectorAll("path, polygon, rect, circle");
        totalAreas = allElements.length;

        allElements.forEach((p, index) => {
            // **PASO CLAVE:** Forzar estilos y asegurar la interacciÃ³n
            p.setAttribute("fill", "white");
            p.setAttribute("stroke", "black"); // FUERZA EL BORDE NEGRO
            p.setAttribute("stroke-width", "1.5");
            p.style.cursor = "pointer";
            p.style.transition = "fill 0.3s ease";
            
            // INTENTA LEER EL NÃšMERO ASIGNADO EN EL SVG (data-num)
            const requiredNum = parseInt(p.getAttribute("data-num"));

            p.addEventListener("click", () => {
                // Si el SVG no tiene data-num, o si tiene un nÃºmero fuera del rango (1-7), ignorar.
                if (isNaN(requiredNum) || requiredNum < 1 || requiredNum > NUM_COLORS) {
                    message.textContent = "âš ï¸ Esta Ã¡rea no tiene un nÃºmero asignado vÃ¡lido (1-7) en el cÃ³digo SVG.";
                    message.classList.remove("win-message");
                    setTimeout(() => message.textContent = "", 3000);
                    return;
                }
                
                const currentFill = p.getAttribute("fill");

                if (selectedColor && selectedColor.num === requiredNum) {
                    // PINTAR solo si estÃ¡ en blanco
                    if (currentFill === "white" || currentFill === "#ffffff") { 
                        p.setAttribute("fill", selectedColor.color);
                        coloredAreas++;
                        if (coloredAreas === totalAreas) showWin();
                        message.textContent = ""; 
                    }
                } else if (selectedColor) { 
                    // Color incorrecto
                    message.textContent = `âŒ Â¡Incorrecto! Esta Ã¡rea es el color #${requiredNum}.`;
                    message.classList.remove("win-message");
                    setTimeout(() => message.textContent = "", 2000);
                } else { 
                    // No hay color seleccionado
                    message.textContent = "ðŸ‘† Por favor, selecciona un color primero.";
                    message.classList.remove("win-message");
                    setTimeout(() => message.textContent = "", 2000);
                }
            });
        });
    };

    function showWin() {
        message.textContent = "ðŸŽ‰ Â¡Felicidades! Completaste el dibujo!";
        message.classList.add("win-message");
        restartBtn.style.display = "block";
    }

    function restart() {
        document.querySelectorAll("#svgContainer path, #svgContainer rect, #svgContainer circle, #svgContainer polygon").forEach(p => {
            p.setAttribute("fill", "white");
        });
        coloredAreas = 0;
        message.textContent = "";
        message.classList.remove("win-message");
        restartBtn.style.display = "none";
        document.querySelectorAll(".color-btn").forEach(b => {
            b.style.outline = "none";
            b.style.boxShadow = "none";
        });
        selectedColor = null;
    }
</script>
</body>
</html>

